<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mikou | 零散学习</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/vue-blog/assets/css/0.styles.004ae998.css" as="style"><link rel="preload" href="/vue-blog/assets/js/app.d8fc62b3.js" as="script"><link rel="preload" href="/vue-blog/assets/js/1.38c83dfd.js" as="script"><link rel="prefetch" href="/vue-blog/assets/js/2.65c4dda9.js"><link rel="prefetch" href="/vue-blog/assets/js/3.3598585f.js"><link rel="prefetch" href="/vue-blog/assets/js/4.792d5d0c.js">
    <link rel="stylesheet" href="/vue-blog/assets/css/0.styles.004ae998.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/vue-blog/" class="home-link router-link-active"><!----><span class="site-name">
      mikou
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-blog/" class="nav-link">Home</a></div><div class="nav-item"><a href="/vue-blog/guide/" class="nav-link router-link-exact-active router-link-active">Guide</a></div><div class="nav-item"><a href="https://vuepress.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link">VuePress</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-blog/" class="nav-link">Home</a></div><div class="nav-item"><a href="/vue-blog/guide/" class="nav-link router-link-exact-active router-link-active">Guide</a></div><div class="nav-item"><a href="https://vuepress.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link">VuePress</a></div><!----></nav><ul class="sidebar-links"><li><a href="/vue-blog/" class="sidebar-link">mikou</a></li><li><a href="/vue-blog/about/" class="sidebar-link">关于我</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>笔记</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/vue-blog/guide/" class="active sidebar-link">零散学习</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="零散学习"><a href="#零散学习" aria-hidden="true" class="header-anchor">#</a> 零散学习</h1><h3 id="订阅账号"><a href="#订阅账号" aria-hidden="true" class="header-anchor">#</a> 订阅账号</h3><ul><li>feedly账号： 745252407@qq.com    liumi0905</li><li>instapaper 应该也一样  配合reeder 一起使用</li></ul><h3 id="node-n-管理安装"><a href="#node-n-管理安装" aria-hidden="true" class="header-anchor">#</a> node n  管理安装</h3><ul><li>$ npm install -g n</li><li>n latest</li></ul><h3 id="vue"><a href="#vue" aria-hidden="true" class="header-anchor">#</a> VUE</h3><h4 id="模板语法-："><a href="#模板语法-：" aria-hidden="true" class="header-anchor">#</a> 模板语法 ：</h4><p>v-bind  v-if  v-for  v-on</p><pre class="language-javascript"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'todo-item'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  	template<span class="token punctuation">:</span> <span class="token string">'&lt;li&gt;这是个待办项&lt;/li&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h4 id="生命周期："><a href="#生命周期：" aria-hidden="true" class="header-anchor">#</a> 生命周期：</h4><p>也有一些其它的钩子，在实例生命周期的不同阶段被调用，如created、mounted、updated 和 destroyed。生命周期钩子的 this 上下文指向调用它的Vue 实例。</p><ul><li>饿了么案例
<ul><li><a href="https://github.com/liangxiaojuan/eleme" target="_blank" rel="noopener noreferrer">git地址1</a></li><li><a href="https://github.com/QAQXiYangYang/vue-ele" target="_blank" rel="noopener noreferrer">git地址2</a></li></ul></li></ul><h3 id="typescript"><a href="#typescript" aria-hidden="true" class="header-anchor">#</a> typescript</h3><ul><li><p>TypeScript 是 JavaScript 的一个超集，主要提供了类型系统和对 ES6 的支持</p></li><li><p>原始数据的类型  跟在 ：后面</p><ul><li>let decLiteral: number = 6;</li><li>any 类型可被改变</li><li>let myFavoriteNumber: any = 'seven';</li><li>myFavoriteNumber = 7;</li></ul></li></ul><h3 id="webpack"><a href="#webpack" aria-hidden="true" class="header-anchor">#</a> webpack</h3><ul><li><p>提升打包速度</p></li><li><p>过滤不需要的模块</p></li><li><p>减少包大小：</p></li><li><p>资源静态分析</p></li><li><p>公共css  apiList   只引用当前需要的部分</p></li><li><p>用事件处理  触发公共模块事件 该模块在最初需要被引用一次 全局可触发</p><ul><li><p>webpack4    https://www.imooc.com/article/23555?block_id=tuijian_wz</p></li><li><p>happypack在编译过程中除了利用多进程的模式加速编译，还同时开启了cache计算，能充分利用缓存读取构建文件，对构建的速度提升也是非常明显的</p></li></ul></li></ul><h3 id="小技巧"><a href="#小技巧" aria-hidden="true" class="header-anchor">#</a> 小技巧</h3><ul><li><p>千位分隔，金钱格式化</p><ul><li>方法1  toLocaleString()</li></ul><pre class="language-javascript"><code> numObj<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">[</span>locales <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
 <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">1234567894532</span><span class="token punctuation">;</span> 
 <span class="token keyword">var</span> b<span class="token operator">=</span><span class="token number">673439.4542</span><span class="token punctuation">;</span> 
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 <span class="token comment">// &quot;1,234,567,894,532&quot; console.log(b.toLocaleString()); // &quot;673,439.454&quot; （小数部分四舍五入了）</span>
</code></pre><ul><li>方法2</li></ul><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">numFormat</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">{</span>
   num<span class="token operator">=</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 分隔小数点</span>
   <span class="token keyword">var</span> arr<span class="token operator">=</span>num<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 转换成字符数组并且倒序排列</span>
   <span class="token keyword">var</span> res<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token operator">=</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">%</span><span class="token number">3</span><span class="token operator">===</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span>i<span class="token operator">!==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 添加分隔符</span>
   <span class="token punctuation">}</span>
   res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   res<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 再次倒序成为正确的顺序</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// 如果有小数的话添加小数部分</span>
   res<span class="token operator">=</span>res<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token operator">+</span>num<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
   res<span class="token operator">=</span>res<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">1234567894532</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b<span class="token operator">=</span><span class="token number">673439.4542</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">numFormat</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;1,234,567,894,532&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">numFormat</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;673,439.4542&quot;</span>

<span class="token comment">// 等价于 </span>
<span class="token keyword">function</span> <span class="token function">formatCash</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prev<span class="token punctuation">,</span> next<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>index <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">?</span> next <span class="token punctuation">:</span> <span class="token punctuation">(</span>next <span class="token operator">+</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> prev
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><p>2 星级评价</p><pre class="language-javascript"><code><span class="token string">&quot;★★★★★☆☆☆☆☆&quot;</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">-</span> rate<span class="token punctuation">,</span> <span class="token number">10</span> <span class="token operator">-</span> rate<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>3 取随机字符串</p><pre class="language-javascript"><code>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 
Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 
</code></pre><p>4 取整数</p><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token operator">~</span><span class="token operator">~</span><span class="token number">2.33</span>

<span class="token keyword">var</span> b<span class="token operator">=</span> <span class="token number">2.33</span> <span class="token operator">|</span> <span class="token number">0</span>

<span class="token keyword">var</span> c<span class="token operator">=</span> <span class="token number">2.33</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span>
</code></pre><p>5 最短的代码实现数组去重</p><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><p>6 取出一个数组中的最大值和最小值</p><pre class="language-javascript"><code><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">458</span> <span class="token punctuation">,</span> <span class="token number">120</span> <span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">215</span> <span class="token punctuation">,</span> <span class="token number">228</span> <span class="token punctuation">,</span> <span class="token number">400</span> <span class="token punctuation">,</span> <span class="token number">122205</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">85411</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> maxInNumbers <span class="token operator">=</span> Math<span class="token punctuation">.</span>max<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">,</span> numbers<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> minInNumbers <span class="token operator">=</span> Math<span class="token punctuation">.</span>min<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">,</span> numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>7 将argruments对象转换成数组</p><pre class="language-javascript"><code><span class="token keyword">var</span> argArray <span class="token operator">=</span> Array<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>slice<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
或者<span class="token constant">ES6</span>：
<span class="token keyword">var</span> argArray <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
</code></pre></li></ul><h3 id="深拷贝"><a href="#深拷贝" aria-hidden="true" class="header-anchor">#</a> 深拷贝</h3><ul><li>Object.assign()的拷贝类型十分明显了,这是一种可以对非嵌套对象进行深拷贝的方法,如果对象中出现嵌套情况,那么其对被嵌套对象的行为就成了普通的浅拷贝.</li><li>如果真的想进行深拷贝,最简单粗暴地方式就是JSON操作.
<ul><li>JSON对象中包含两个方法, stringify()和parse(),前者可以将对象JSON化,而后者可以将JSON格式转换为对象.这是一种可以实现深拷贝的方法.</li><li>但这种方法的缺陷是会破坏原型链,并且无法拷贝属性值为function的属性</li></ul></li></ul><h3 id="acync-await"><a href="#acync-await" aria-hidden="true" class="header-anchor">#</a> acync  await</h3><ul><li><p>async 表示这是一个async函数，await只能用在这个函数里面。</p></li><li><p>await表示在这里等待promise返回结果了，再继续执行。await后面跟着的应该是一个promise对象（当然，其他返回值也没关系，只是会立即执行，不过那样就没有意义了…）</p><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 返回 ‘ok’</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> start <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 收到 ‘ok’</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>不必写then  回调 可以直接拿到值</p><p>既然.then(..)不用写了，那么.catch(..)也不用写，可以直接用标准的try catch语法捕捉错误。</p><p>await必须在async函数的上下文中</p><p><a href="http://blog.csdn.net/sinat_17775997/article/details/60609498" target="_blank" rel="noopener noreferrer">文章链接</a></p><ul><li>await 写起来更优雅</li><li>promise  不能跨层访问值 then一级级下传</li></ul></li></ul><h3 id="跨域"><a href="#跨域" aria-hidden="true" class="header-anchor">#</a> 跨域</h3><ul><li><p>CORS 思想是 是哟哦那个自定义的http头部让浏览器与服务器进行沟通，决定请求或响应的成功与否</p><ul><li>IE8：XDR（XDomainRequest）</li></ul><pre class="language-javascript"><code><span class="token keyword">var</span> xdr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XDomainRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xdd<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>xdd<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
<span class="token punctuation">}</span> 
xdr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>‘<span class="token keyword">get</span>’<span class="token punctuation">,</span>’http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">.</span>’<span class="token punctuation">)</span>
xdr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">//没有值时必写null</span>

<span class="token comment">// 其他浏览器： 通过XMLHttpRequest对象实现的</span>
在open 中传入的url为绝对<span class="token constant">URL</span>即可

xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>‘<span class="token keyword">get</span>’<span class="token punctuation">,</span>’’http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>……<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token comment">// 以上不能接收发送cookie 不能拿到相应头部信息</span>

<span class="token comment">// 但是xhr可以拿到请求状态  status  支持同步</span>
</code></pre></li><li><p>其他跨域 利用DOM中能够跨域的请求</p><ul><li><p>图像： get请求   单向通信</p></li><li><p>JSONP:<br>
动态创建script标签，可以拿到响应信息
可能存在安全问题  很难知道请求是否失败（script的onerror 属性浏览器支持）</p><ul><li>都可以不受限从其他域家在资源</li><li>CORS与JSONP相比，无疑更为先进、方便和可靠。</li></ul></li></ul><ol><li>JSONP只能实现GET请求，而CORS支持所有类型的HTTP请求。</li><li>使用CORS，开发者可以使用普通的XMLHttpRequest发起请求和获得数据，比起JSONP有更好的错误处理。</li><li>JSONP主要被老的浏览器支持，它们往往不支持CORS，而绝大多数现代浏览器都已经支持了CORS（这部分会在后文浏览器支持部分介绍）。</li></ol><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createCORSRequest</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;withCredentials&quot;</span> <span class="token keyword">in</span> xhr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 此时即支持CORS的情况</span>
   <span class="token comment">// 检查XMLHttpRequest对象是否有“withCredentials”属性</span>
   <span class="token comment">// “withCredentials”仅存在于XMLHTTPRequest2对象里</span>
   xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token operator">!=</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

   <span class="token comment">// 否则检查是否支持XDomainRequest，IE8和IE9支持</span>
   <span class="token comment">// XDomainRequest仅存在于IE中，是IE用于支持CORS请求的方式</span>
   xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XDomainRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

   <span class="token comment">// 否则，浏览器不支持CORS</span>
   xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token keyword">return</span> xhr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token function">createCORSRequest</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>xhr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'CORS not supported'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></li></ul><h3 id="web-sockets"><a href="#web-sockets" aria-hidden="true" class="header-anchor">#</a> web Sockets</h3><ul><li><p>单独持久的连接上提供全双工，双向通信的信道</p></li><li><p>不采用http协议，使用自定义协议，为快速传输小数据设计，需要不同的web服务器( 非http服务器)</p></li><li><p>协议ws://  加密 wss://</p><pre class="language-javascript"><code><span class="token keyword">var</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WedSocket</span><span class="token punctuation">(</span>‘ws<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token operator">/</span>server<span class="token punctuation">.</span>php’<span class="token punctuation">)</span>
<span class="token comment">// 0 正在建立连接</span>
<span class="token comment">// 1 已经建立连接</span>
<span class="token comment">// 2 正在关闭连接</span>
<span class="token comment">// 3 已经关闭连接</span>

<span class="token comment">// 事件：</span>
<span class="token comment">// 发送数据： 只接受纯文本 先序列化 JSON.stringify()</span>
socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>‘hello world’<span class="token punctuation">)</span>

<span class="token comment">//接受数据</span>
socket<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token comment">// 其他： onopen  on error onclose</span>
</code></pre></li></ul><h3 id="知识-编码："><a href="#知识-编码：" aria-hidden="true" class="header-anchor">#</a> 知识  编码：</h3><h4 id="escape-："><a href="#escape-：" aria-hidden="true" class="header-anchor">#</a> escape ：</h4><ul><li>不对 ASCII 字母、数字进行编码。</li><li>不对 *@-_+./ 进行编码。</li><li>其他所有的字符都会被转义序列替换。</li></ul><h4 id="encodeuri"><a href="#encodeuri" aria-hidden="true" class="header-anchor">#</a> encodeURI</h4><ul><li>不对 ASCII 字母和数字进行编码。</li><li>不对 -_.!~*'();/?😡&amp;=+$,# 这20个ASCII 标点符号进行编码。</li><li>其他所有的字符都会被转义序列替换。</li></ul><h5 id="escape的不编码集（69个）-是-encodeuri的不编码集（82个）-的子集。"><a href="#escape的不编码集（69个）-是-encodeuri的不编码集（82个）-的子集。" aria-hidden="true" class="header-anchor">#</a> escape的不编码集（69个） 是 encodeURI的不编码集（82个） 的子集。</h5><h5 id="escape和encodeuri的百分号编码的根本区别在于，encodeuri是w3c的标准（rfc-3986），而escape是非标准。"><a href="#escape和encodeuri的百分号编码的根本区别在于，encodeuri是w3c的标准（rfc-3986），而escape是非标准。" aria-hidden="true" class="header-anchor">#</a> escape和encodeURI的百分号编码的根本区别在于，encodeURI是W3C的标准（RFC 3986），而escape是非标准。</h5><ul><li><p>共同点：</p><ul><li>对于需要编码的ASCII字符，将其表示为两个16进制的数字，然后在其前面放置转义字符(%)，置入URI中的相应位置。</li></ul></li><li><p>区别：</p><ul><li>标准：对于非ASCII字符, 需要转换为UTF-8字节序, 然后每个字节按照上述方式表示。</li><li>非标准：对于非ASCII字符在URI中表示为: %uxxxx, 其中xxxx是用4个十六进制数字表示的Unicode的码位值。</li></ul></li><li><p>encodeURIComponent() 函数将转义用于分隔 URI 各个部分的标点符号（;/?😡&amp;=+$,#），所以encodeURIComponent的不编码集只有71个</p></li></ul><pre class="language-javascript"><code>例子：
<span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token string">'https://aotu.io/'</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;https%3A%2F%2Faotu.io%2F&quot;</span>

<span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token string">'https://aotu.io/'</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;https://aotu.io/&quot;</span>
</code></pre><h4 id="ascii码"><a href="#ascii码" aria-hidden="true" class="header-anchor">#</a> ASCII码</h4><ul><li>一个字节（byte） = 8个二进制位（bit），
因此1 byte可以表示256个字符，从00000000到11111111。
ASCII码的规定是最前面的1位二进制统一规定为0，所以只能表示128个字符编码了。
具体可查看维基百科-ASCII 。</li></ul><h4 id="unicode"><a href="#unicode" aria-hidden="true" class="header-anchor">#</a> Unicode</h4><ul><li>Unicode，中文翻译成万国码、国际码、统一码、单一码。
Unicode只是一个符号集，只规定了符号的二进制代码。
从Unicode的中文翻译上可以看出Unicode与ASCII的区别：Unicode对世界上大部分的文字系统进行了整理、编码，而ASCII只是英文字符。</li></ul><h4 id="utf-8"><a href="#utf-8" aria-hidden="true" class="header-anchor">#</a> UTF-8</h4><ul><li>UTF-8是Unicode的实现方式之一。</li></ul><p><a href="https://aotu.io/notes/2017/06/15/The-mystery-of-URL-encoding/" target="_blank" rel="noopener noreferrer">文章链接</a></p><h3 id="reduce"><a href="#reduce" aria-hidden="true" class="header-anchor">#</a> Reduce</h3><pre class="language-javascript"><code>    <span class="token keyword">const</span> <span class="token function-variable function">createStore</span> <span class="token operator">=</span> <span class="token punctuation">(</span>reducer<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> state<span class="token punctuation">;</span>
    <span class="token keyword">let</span> listeners <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">getState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        state <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>
        listeners<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>listener <span class="token operator">=&gt;</span> <span class="token function">listener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">subscribe</span> <span class="token operator">=</span> <span class="token punctuation">(</span>listener<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        listeners<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        listeners <span class="token operator">=</span> listeners<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>l <span class="token operator">=&gt;</span> l <span class="token operator">!==</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>   
        <span class="token comment">// 这里为了给解除该事件订阅留了个口～</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> getState<span class="token punctuation">,</span> dispatch<span class="token punctuation">,</span> subscribe <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 中间件就是一个函数，对store.dispatch方法进行了改造，在发出 Action 和执行 Reducer 这两步之间，添加了其他功能。</span>
</code></pre><h3 id="amd-require-js-先加载，预加载-cmd-sea-js-按需加载，懒加载-标准"><a href="#amd-require-js-先加载，预加载-cmd-sea-js-按需加载，懒加载-标准" aria-hidden="true" class="header-anchor">#</a> AMD(require.js, 先加载，预加载)  CMD(sea.js  按需加载，懒加载 )标准</h3><ul><li>require.js 原理</li></ul><ol><li>动态创建script标签加载js资源</li><li>递归加载依赖</li><li>定义一个模块时会注册相关的id  依赖等  根据依赖递归加载</li></ol><p><a href="http://foio.github.io/requireJS/" target="_blank" rel="noopener noreferrer">文章</a></p><h3 id="gulp-grunt"><a href="#gulp-grunt" aria-hidden="true" class="header-anchor">#</a> gulp grunt</h3><ul><li><p>gulp（像写代码一样）</p></li><li><p>grunt（偏向于配置）</p></li><li><p>流：Gulp是一个基于流的构建系统，使用代码优于配置的策略。</p></li><li><p>插件：Gulp的插件更纯粹，单一的功能，并坚持一个插件只做一件事。</p></li><li><p>代码优于配置：维护Gulp更像是写代码，而且Gulp遵循CommonJS规范，因此跟写Node程序没有差别。</p></li><li><p>没有产生中间文件</p></li></ul><h3 id="webpack-模块加载器＋打包工具"><a href="#webpack-模块加载器＋打包工具" aria-hidden="true" class="header-anchor">#</a> webpack(模块加载器＋打包工具)</h3><p><a href="http://www.cnblogs.com/vajoy/p/4650467.html" target="_blank" rel="noopener noreferrer">参考资料</a></p><h3 id="babel"><a href="#babel" aria-hidden="true" class="header-anchor">#</a> Babel</h3><p>是一个广泛使用的转码器，可以将ES6代码转为ES5代码，从而在现有环境执行。</p><p>babel-polyfill
Babel默认只转换新的JavaScript句法（syntax），而不转换新的API，比如Iterator、Generator、Set、Maps、Proxy、Reflect、Symbol、Promise等全局对象，</p><p><a href="https://segmentfault.com/a/1190000002452115" target="_blank" rel="noopener noreferrer">参考资料</a></p><h3 id="promise-是什么，-解决什么问题-console-dir-promise"><a href="#promise-是什么，-解决什么问题-console-dir-promise" aria-hidden="true" class="header-anchor">#</a> promise 是什么， 解决什么问题  console.dir(Promise)</h3><ol><li><p>是构造函数</p></li><li><p>Promise是js中用来解决回调嵌套的问题的一套解决方案,增强代码可读性</p></li><li><p>promise是一套规范和原则，只要设计的库符合规范的要求就都可以算是promise
如 Promise/A，Promise/B，Promise/D 以及 Promise/A 的升级版 Promise/A+
promise的使用  promiseA+ 规范
规范在哪？ 在这~  https://segmentfault.com/a/1190000002452115</p></li><li><p>怎么用？</p><pre class="language-javascript"><code><span class="token keyword">var</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// 做点什么</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token comment">/* 如果符合条件 */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;很好，成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;出错了~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></li></ol><ul><li><p>Promise.all()<br>
在有些场景下，我们所要处理的多个异步任务之间并没有像上例中的那么强的依赖关系，只需要在这一系列的异步任务全部完成的时候执行一些特定逻辑。这个时候为了性能的考虑等，我们不需要将它们都串行起来执行，并行执行它们将是一个最优的选择当所有 promise/值执行完毕后或有一个发生错误时返回</p></li><li><p>Promise.race()  当数组中有一个 resolve 或 reject 时返回</p></li><li><p>Promise.then()</p></li><li><p>Promise 构造函数包含一个参数和一个带有 resolve（解析）和 reject（拒绝）两个参数的回调。在回调中执行一些操作（例如异步），如果一切都正常，则调用 resolve，否则调用 reject。</p></li></ul><h5 id="then-包含两个参数：一个用于成功情形的回调和一个用于失败情形的回调。这两个都是可选的，因此您可以只添加一个用于成功情形或失败情形的回调。"><a href="#then-包含两个参数：一个用于成功情形的回调和一个用于失败情形的回调。这两个都是可选的，因此您可以只添加一个用于成功情形或失败情形的回调。" aria-hidden="true" class="header-anchor">#</a> then() 包含两个参数：一个用于成功情形的回调和一个用于失败情形的回调。这两个都是可选的，因此您可以只添加一个用于成功情形或失败情形的回调。</h5><ul><li><p>promise 常用库</p><ul><li>Q</li><li>when</li><li>WinJS</li><li>RSVP.js</li></ul></li><li><p>浏览器支持情况</p><ul><li>在 Chrome 32、Opera 19、Firefox 29、Safari 8 、 Microsoft Edge</li><li>如要使没有完全实现 promise 的浏览器符合规范，或向其他浏览器和 Node.js 中添加 promise，请查看 polyfill（gzip 压缩大小为 2k）。</li></ul></li></ul></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/vue-blog/about/" class="prev">
          关于我
        </a></span><!----></p></div></div></div></div>
    <script src="/vue-blog/assets/js/1.38c83dfd.js" defer></script><script src="/vue-blog/assets/js/app.d8fc62b3.js" defer></script>
  </body>
</html>
